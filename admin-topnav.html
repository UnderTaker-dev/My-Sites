<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel - Top Nav - Mathias</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  background: #f8fafc;
  color: #1e293b;
  min-height: 100vh;
  position: relative;
}

body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 40%;
  background: linear-gradient(180deg, #3b82f6 0%, #60a5fa 100%);
  pointer-events: none;
  z-index: 0;
}

.top-nav {
  position: sticky;
  top: 0;
  z-index: 100;
  background: #ffffff;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  border-bottom: 2px solid #e2e8f0;
}

.top-nav-container {
  max-width: 1600px;
  margin: 0 auto;
  padding: 0.75rem 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 2rem;
}

.nav-brand {
  font-size: 1.75rem;
  font-weight: 800;
  white-space: nowrap;
  background: linear-gradient(135deg, #3b82f6, #8b5cf6);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.nav-links {
  display: flex;
  gap: 0.25rem;
  flex: 1;
  justify-content: center;
  overflow-x: auto;
  scrollbar-width: none;
}

.nav-links::-webkit-scrollbar {
  display: none;
}

.nav-link {
  padding: 0.75rem 1.5rem;
  background: transparent;
  border: none;
  color: #64748b;
  border-radius: 12px;
  cursor: pointer;
  font-weight: 600;
  font-size: 0.95rem;
  transition: all 0.2s ease;
  white-space: nowrap;
  text-decoration: none;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  position: relative;
}

.nav-link::before {
  content: '';
  position: absolute;
  bottom: -0.75rem;
  left: 50%;
  transform: translateX(-50%);
  width: 0;
  height: 3px;
  background: linear-gradient(90deg, #3b82f6, #8b5cf6);
  border-radius: 2px;
  transition: width 0.3s ease;
}

.nav-link:hover {
  background: #f1f5f9;
  color: #1e293b;
}

.nav-link.active {
  background: linear-gradient(135deg, #eff6ff, #f5f3ff);
  color: #3b82f6;
  box-shadow: inset 0 0 0 2px #3b82f6;
}

.nav-link.active::before {
  width: 100%;
}

.page-container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 2rem;
  position: relative;
  z-index: 1;
}

.page-content {
  animation: fadeInUp 0.6s ease-out;
  background: #ffffff;
  border-radius: 16px;
  padding: 2rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05), 0 1px 3px rgba(0, 0, 0, 0.1);
  border: 1px solid #e2e8f0;
}

.data-section {
  background: #ffffff;
  padding: 1.5rem;
  border-radius: 12px;
  margin-bottom: 2rem;
  border: 1px solid #e2e8f0;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
}

.data-section h2 {
  color: #1e293b;
  font-size: 1.25rem;
  margin-bottom: 1rem;
  font-weight: 700;
}
  font-weight: 700;
  background: linear-gradient(135deg, #fff 0%, #f0f0f0 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.btn-logout {
  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
  border: none;
  padding: 0.8rem 1.5rem;
  border-radius: 12px;
  color: #fff;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(245, 87, 108, 0.3);
}

.btn-logout:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(245, 87, 108, 0.5);
}

.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 1.5rem;
  margin-bottom: 2.5rem;
}

.stat-card {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 20px;
  padding: 2rem;
  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  backdrop-filter: blur(10px);
  position: relative;
  overflow: hidden;
}

.stat-card::before {
  content: '';
  position: absolute;
  top: -50%;
  right: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
  opacity: 0;
  transition: opacity 0.3s ease;
}

.stat-card:hover::before {
  opacity: 1;
}

.stat-card:hover {
  background: rgba(255, 255, 255, 0.15);
  transform: translateY(-8px) scale(1.02);
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2);
}

.stat-card h3 {
  font-size: 0.9rem;
  color: rgba(255, 255, 255, 0.8);
  margin-bottom: 0.5rem;
  text-transform: uppercase;
  letter-spacing: 1px;
  font-weight: 600;
}

.stat-card .stat-value {
  font-size: 2.8rem;
  font-weight: 800;
  background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin: 0.5rem 0;
}

.stat-card .stat-icon {
  font-size: 2.5rem;
  opacity: 0.2;
  position: absolute;
  top: 1.5rem;
  right: 1.5rem;
}

.data-section {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 20px;
  padding: 2rem;
  margin-bottom: 2rem;
  backdrop-filter: blur(10px);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
}

.data-section h2 {
  font-size: 1.5rem;
  margin-bottom: 1.5rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-weight: 700;
  padding-bottom: 0.75rem;
  border-bottom: 2px solid rgba(255, 255, 255, 0.2);
}

.section-group {
  margin-bottom: 3rem;
}

.section-header {
  font-size: 1.2rem;
  color: rgba(255, 255, 255, 0.9);
  margin-bottom: 1.5rem;
  padding-left: 0.5rem;
  border-left: 4px solid #4facfe;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.content-section {
  animation: fadeInUp 0.6s ease-out;
}

.content-section:not(:first-child) {
  margin-top: 0;
}

@media (max-width: 1024px) {
  .sidebar {
    transform: translateX(-100%);
    transition: transform 0.3s ease;
  }
  
  .sidebar.open {
    transform: translateX(0);
  }
  
  .main-content {
    margin-left: 0;
  }
  
  .mobile-menu-btn {
    display: block !important;
  }
}

.mobile-menu-btn {
  display: none;
  position: fixed;
  top: 1rem;
  left: 1rem;
  z-index: 101;
  background: rgba(255, 255, 255, 0.2);
  border: none;
  padding: 0.75rem;
  border-radius: 10px;
  color: white;
  font-size: 1.5rem;
  cursor: pointer;
  backdrop-filter: blur(10px);
}

.subscriber-list {
  list-style: none;
  padding: 0;
}

.subscriber-item {
  background: rgba(255, 255, 255, 0.08);
  padding: 1.2rem;
  border-radius: 12px;
  margin-bottom: 0.75rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  transition: all 0.3s ease;
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.subscriber-item:hover {
  background: rgba(255, 255, 255, 0.12);
  transform: translateX(5px);
}

.btn-delete {
  background: rgba(231, 76, 60, 0.3);
  border: 1px solid rgba(231, 76, 60, 0.6);
  padding: 0.5rem 1rem;
  border-radius: 10px;
  color: #fff;
  cursor: pointer;
  transition: all 0.3s ease;
  font-size: 0.9rem;
  font-weight: 600;
}

.btn-delete:hover {
  background: rgba(231, 76, 60, 0.6);
  transform: scale(1.05);
}

.empty-state {
  text-align: center;
  padding: 3rem;
  color: rgba(255, 255, 255, 0.5);
  font-style: italic;
  font-size: 1.1rem;
}

table {
  border-collapse: collapse;
  width: 100%;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 12px;
  overflow: hidden;
}

thead tr {
  background: rgba(255, 255, 255, 0.1) !important;
}

th {
  padding: 1rem !important;
  text-align: left;
  font-weight: 600;
  text-transform: uppercase;
  font-size: 0.85rem;
  letter-spacing: 1px;
  border-bottom: 2px solid rgba(255, 255, 255, 0.2) !important;
}

td {
  padding: 1rem !important;
}

tbody tr {
  border-bottom: 1px solid rgba(255, 255, 255, 0.05) !important;
  transition: background 0.3s ease;
}

tbody tr:hover {
  background: rgba(255, 255, 255, 0.08) !important;
}

.export-btn {
  padding: 0.6rem 1.2rem !important;
  border: none !important;
  border-radius: 10px !important;
  background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%) !important;
  color: #fff !important;
  cursor: pointer !important;
  font-weight: 600 !important;
  transition: all 0.3s ease !important;
  box-shadow: 0 4px 15px rgba(79, 172, 254, 0.3) !important;
}

.export-btn:hover {
  transform: translateY(-2px) !important;
  box-shadow: 0 6px 20px rgba(79, 172, 254, 0.5) !important;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.stat-card, .data-section {
  animation: fadeInUp 0.6s ease-out backwards;
}

.stat-card:nth-child(1) { animation-delay: 0.1s; }
.stat-card:nth-child(2) { animation-delay: 0.2s; }
.stat-card:nth-child(3) { animation-delay: 0.3s; }

@media (max-width: 768px) {
  .admin-header {
    flex-direction: column;
    gap: 1rem;
    text-align: center;
  }
  
  .stats-grid {
    grid-template-columns: 1fr;
  }
  
  .admin-header h1 {
    font-size: 1.5rem;
  }
}
</style>
</head>
<body>

<nav class="top-nav">
  <div class="top-nav-container">
    <div class="nav-brand">üéÆ Dashboard</div>
    <div class="nav-links">
      <a href="#overview" class="nav-link active" onclick="event.preventDefault(); showPage('overview')">üìä Overview</a>
      <a href="#analytics" class="nav-link" onclick="event.preventDefault(); showPage('analytics')">üìà Analytics</a>
      <a href="#subscribers" class="nav-link" onclick="event.preventDefault(); showPage('subscribers')">üìß Subscribers</a>
      <a href="#pageviews" class="nav-link" onclick="event.preventDefault(); showPage('pageviews')">üëÄ Page Views</a>
      <a href="#donations" class="nav-link" onclick="event.preventDefault(); showPage('donations')">üí∞ Donations</a>
      <a href="#settings" class="nav-link" onclick="event.preventDefault(); showPage('settings')">‚öôÔ∏è Settings</a>
    </div>
    <button class="btn-logout" onclick="logout()">üö™ Logout</button>
  </div>
</nav>

<div class="page-container">
  
  <!-- Overview Page -->
  <div id="page-overview" class="page-content">
    <div class="stats-grid">
    <div class="stat-card">
      <span class="stat-icon">üìß</span>
      <h3>Newsletter Subscribers</h3>
      <div class="stat-value" id="subscriberCount">0</div>
    </div>
    
    <div class="stat-card" style="cursor: pointer;" onclick="togglePageViews()">
      <span class="stat-icon">üëÄ</span>
      <h3>Page Views</h3>
      <div class="stat-value" id="pageViewCount">Loading...</div>
    </div>
    
    <div class="stat-card" style="cursor: pointer;" onclick="toggleDonations()">
      <span class="stat-icon">üí∞</span>
      <h3>Donations</h3>
      <div class="stat-value" id="donationAmount">Loading...</div>
      <div style="font-size: 0.9rem; opacity: 0.8; margin-top: 0.5rem;" id="donationCount"></div>
    </div>
  </div>
  </div>

  <!-- Analytics Page -->
  <div id="page-analytics" class="page-content" style="display:none;">
    <div class="section-header">üìà Analytics</div>
    
  <div class="data-section">
    <h2>Analytics Overview</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 1.5rem; margin-top: 1.5rem;">
      
      <div style="background: rgba(255,255,255,0.05); padding: 1.5rem; border-radius: 15px;">
        <h3 style="font-size: 1.1rem; margin-bottom: 1rem;">Device Distribution</h3>
        <canvas id="deviceChart"></canvas>
      </div>
      
      <div style="background: rgba(255,255,255,0.05); padding: 1.5rem; border-radius: 15px;">
        <h3 style="font-size: 1.1rem; margin-bottom: 1rem;">Browser Usage</h3>
        <canvas id="browserChart"></canvas>
      </div>
      
      <div style="background: rgba(255,255,255,0.05); padding: 1.5rem; border-radius: 15px;">
        <h3 style="font-size: 1.1rem; margin-bottom: 1rem;">Top Pages</h3>
        <canvas id="pagesChart"></canvas>
      </div>
      
      <div style="background: rgba(255,255,255,0.05); padding: 1.5rem; border-radius: 15px;">
        <h3 style="font-size: 1.1rem; margin-bottom: 1rem;">Top Countries</h3>
        <canvas id="countriesChart"></canvas>
      </div>
      
    </div>
  </div>
  </div>

  <!-- Subscribers Page -->
  <div id="page-subscribers" class="page-content" style="display:none;">
    <div class="section-header">üìß Subscribers</div>
    
  <div class="data-section">
    <h2>Newsletter Subscribers</h2>
    <ul class="subscriber-list" id="subscriberList">
      <li class="empty-state">No subscribers yet</li>
    </ul>
  </div>

  <div class="data-section">
    <h2>Unsubscribed Users</h2>
    <ul class="subscriber-list" id="unsubscribedList">
      <li class="empty-state">No unsubscribed users yet</li>
    </ul>
  </div>
  </div>

  <!-- Page Views Page -->
  <div id="page-pageviews" class="page-content" style="display:none;">
    <div class="section-header">üëÄ Page Views</div>
    
  <div class="data-section">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
      <h2 style="margin: 0;">Recent Page Views</h2>
      <button onclick="exportPageViews()" class="export-btn">üì• Export CSV</button>
    </div>
    <div style="overflow-x: auto;">
      <table style="width: 100%; border-collapse: collapse;">
        <thead>
          <tr style="background: rgba(255,255,255,0.05); text-align: left;">
            <th style="padding: 0.8rem; border-bottom: 2px solid rgba(255,255,255,0.1);">Page</th>
            <th style="padding: 0.8rem; border-bottom: 2px solid rgba(255,255,255,0.1);">Timestamp</th>
            <th style="padding: 0.8rem; border-bottom: 2px solid rgba(255,255,255,0.1);">Location</th>
            <th style="padding: 0.8rem; border-bottom: 2px solid rgba(255,255,255,0.1);">Device Info</th>
            <th style="padding: 0.8rem; border-bottom: 2px solid rgba(255,255,255,0.1);">Referrer</th>
          </tr>
        </thead>
        <tbody id="pageViewsTable">
          <tr><td colspan="5" style="padding: 1rem; text-align: center; opacity: 0.7;">Loading...</td></tr>
        </tbody>
      </table>
    </div>
  </div>
  </div>

  <!-- Donations Page -->
  <div id="page-donations" class="page-content" style="display:none;">
    <div class="section-header">üí∞ Donations</div>
    
  <div class="data-section">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
      <h2 style="margin: 0;">Donation History</h2>
      <button onclick="exportDonations()" class="export-btn">üì• Export CSV</button>
    </div>
    <div style="overflow-x: auto;">
      <table style="width: 100%; border-collapse: collapse;">
        <thead>
          <tr style="background: rgba(255,255,255,0.05); text-align: left;">
            <th style="padding: 0.8rem; border-bottom: 2px solid rgba(255,255,255,0.1);">Amount</th>
            <th style="padding: 0.8rem; border-bottom: 2px solid rgba(255,255,255,0.1);">Email</th>
            <th style="padding: 0.8rem; border-bottom: 2px solid rgba(255,255,255,0.1);">Timestamp</th>
            <th style="padding: 0.8rem; border-bottom: 2px solid rgba(255,255,255,0.1);">Status</th>
          </tr>
        </thead>
        <tbody id="donationsTable">
          <tr><td colspan="4" style="padding: 1rem; text-align: center; opacity: 0.7;">Loading...</td></tr>
        </tbody>
      </table>
    </div>
  </div>
  </div>

  <!-- Settings Page -->
  <div id="page-settings" class="page-content" style="display:none;">
    <div class="section-header">‚öôÔ∏è Settings</div>
    
  <div class="data-section">
    <h2>Quick Actions</h2>
    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
      <button class="btn btn-primary" onclick="openTechStackEditor()">üíª Edit Tech Stack</button>
      <button class="btn btn-primary" onclick="openNewsletterComposer()">‚úâÔ∏è Send Newsletter</button>
      <button class="btn btn-primary" onclick="exportSubscribers()">üì• Export Subscribers</button>
      <button class="btn btn-secondary" onclick="clearAllData()">üóëÔ∏è Clear All Data</button>
    </div>
  </div>
  </div>

</div>
</div>

<!-- Tech Stack Editor Modal -->
<div id="techStackModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 10000; align-items: center; justify-content: center;">
  <div style="background: linear-gradient(135deg, #2c3e50, #34495e); padding: 2rem; border-radius: 20px; max-width: 600px; width: 90%; max-height: 90vh; overflow-y: auto;">
    <h2 style="margin: 0 0 1rem 0;">üíª Edit Tech Stack</h2>
    
    <div id="skillsList" style="margin-bottom: 1.5rem;"></div>
    
    <div style="margin-bottom: 1rem; padding: 1rem; background: rgba(255,255,255,0.05); border-radius: 10px;">
      <h3 style="font-size: 1rem; margin-bottom: 0.5rem;">Add New Skill</h3>
      <p style="font-size: 0.85rem; opacity: 0.7; margin-bottom: 0.8rem;">üí° Press Win + . (period) to open emoji picker</p>
      <div style="display: flex; gap: 0.5rem;">
        <input type="text" id="newSkillIcon" placeholder="üî∑" maxlength="2" style="width: 60px; padding: 0.6rem; border: 2px solid rgba(255,255,255,0.2); border-radius: 10px; background: rgba(255,255,255,0.1); color: #fff; font-size: 1.2rem; text-align: center;">
        <input type="text" id="newSkillName" placeholder="Skill name" style="flex: 1; padding: 0.6rem; border: 2px solid rgba(255,255,255,0.2); border-radius: 10px; background: rgba(255,255,255,0.1); color: #fff; font-size: 0.95rem;">
        <button onclick="addSkill()" style="padding: 0.6rem 1.2rem; border: none; border-radius: 10px; background: linear-gradient(135deg, #1abc9c, #16a085); color: #fff; cursor: pointer; font-weight: 600;">‚ûï Add</button>
      </div>
    </div>
    
    <div style="display: flex; gap: 0.5rem;">
      <button onclick="closeTechStackEditor()" style="flex: 1; padding: 0.8rem; border: 1px solid rgba(255,255,255,0.2); border-radius: 10px; background: rgba(255,255,255,0.1); color: #fff; cursor: pointer; font-weight: 600;">Cancel</button>
      <button onclick="saveTechStack()" style="flex: 2; padding: 0.8rem; border: none; border-radius: 10px; background: linear-gradient(135deg, #3498db, #2980b9); color: #fff; cursor: pointer; font-weight: 600; box-shadow: 0 3px 10px rgba(52, 152, 219, 0.4);">üíæ Save Changes</button>
    </div>
  </div>
</div>

<!-- Newsletter Composer Modal -->
<div id="newsletterModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 10000; align-items: center; justify-content: center;">
  <div style="background: linear-gradient(135deg, #2c3e50, #34495e); padding: 2rem; border-radius: 20px; max-width: 600px; width: 90%; max-height: 90vh; overflow-y: auto;">
    <h2 style="margin: 0 0 1rem 0;">‚úâÔ∏è Send Newsletter</h2>
    
    <div style="margin-bottom: 1rem;">
      <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Subject</label>
      <input type="text" id="newsletterSubject" placeholder="Newsletter Subject" style="width: 100%; padding: 0.8rem; border: 2px solid rgba(255,255,255,0.2); border-radius: 10px; background: rgba(255,255,255,0.1); color: #fff; font-size: 0.95rem;">
    </div>
    
    <div style="margin-bottom: 1rem;">
      <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Message (HTML supported)</label>
      <textarea id="newsletterMessage" placeholder="Write your newsletter message here..." style="width: 100%; padding: 0.8rem; border: 2px solid rgba(255,255,255,0.2); border-radius: 10px; background: rgba(255,255,255,0.1); color: #fff; font-size: 0.95rem; min-height: 200px; font-family: inherit; resize: vertical;"></textarea>
    </div>
    
    <div style="margin-bottom: 1.5rem; padding: 1rem; background: rgba(255,255,255,0.05); border-radius: 10px;">
      <strong>üìß Recipients: <span id="recipientCount">0</span></strong>
    </div>
    
    <div style="display: flex; gap: 0.5rem;">
      <button onclick="closeNewsletterComposer()" style="flex: 1; padding: 0.8rem; border: 1px solid rgba(255,255,255,0.2); border-radius: 10px; background: rgba(255,255,255,0.1); color: #fff; cursor: pointer; font-weight: 600;">Cancel</button>
      <button onclick="sendNewsletter()" id="sendNewsletterBtn" style="flex: 2; padding: 0.8rem; border: none; border-radius: 10px; background: linear-gradient(135deg, #1abc9c, #16a085); color: #fff; cursor: pointer; font-weight: 600; box-shadow: 0 3px 10px rgba(26, 188, 156, 0.4);">üì® Send to All</button>
    </div>
  </div>
</div>

<script>
// Check authentication
window.addEventListener('DOMContentLoaded', () => {
  const token = localStorage.getItem('adminToken');
  if (!token) {
    window.location.href = '/';
    return;
  }
  
  loadDashboardData();
});

async function loadDashboardData() {
  try {
    // Fetch subscribers from Airtable
    const response = await fetch('/.netlify/functions/get-subscribers');
    const data = await response.json();
    
    const subscribers = data.subscribers || [];
    const unsubscribed = data.unsubscribed || [];
    
    document.getElementById('subscriberCount').textContent = subscribers.length;
    
    const listElement = document.getElementById('subscriberList');
    
    if (subscribers.length === 0) {
      listElement.innerHTML = '<li class="empty-state">No subscribers yet</li>';
    } else {
      listElement.innerHTML = subscribers.map((item) => `
        <li class="subscriber-item">
          <span>üìß ${item.email}</span>
          <button class="btn-delete" onclick="deleteSubscriber('${item.id}', '${item.email}')">üóëÔ∏è Delete</button>
        </li>
      `).join('');
    }
    
    // Load unsubscribed list
    const unsubListElement = document.getElementById('unsubscribedList');
    
    if (unsubscribed.length === 0) {
      unsubListElement.innerHTML = '<li class="empty-state">No unsubscribed users yet</li>';
    } else {
      unsubListElement.innerHTML = unsubscribed.map((item) => `
        <li class="subscriber-item">
          <span>üö´ ${item.email} <small style="opacity: 0.7;">(${item.date ? new Date(item.date).toLocaleDateString() : 'N/A'})</small></span>
          <button class="btn-delete" onclick="deleteUnsubscribed('${item.id}', '${item.email}')">üóëÔ∏è Remove</button>
        </li>
      `).join('');
    }
    
    // Load page views
    try {
      const pageViewsResponse = await fetch('/.netlify/functions/get-page-views');
      const pageViewsData = await pageViewsResponse.json();
      document.getElementById('pageViewCount').textContent = pageViewsData.total || 0;
      
      // Load page views details
      await loadPageViewsTable();
    } catch (error) {
      console.error('Error loading page views:', error);
      document.getElementById('pageViewCount').textContent = 'Error';
    }
    
    // Load donations
    try {
      const donationsResponse = await fetch('/.netlify/functions/get-donations');
      const donationsData = await donationsResponse.json();
      document.getElementById('donationAmount').textContent = `$${donationsData.total.toFixed(2)}`;
      document.getElementById('donationCount').textContent = `${donationsData.count} donation(s)`;
      
      // Load donations details
      await loadDonationsTable();
    } catch (error) {
      console.error('Error loading donations:', error);
      document.getElementById('donationAmount').textContent = 'Error';
    }
    
    // Load analytics charts
    await loadAnalyticsCharts();
    
  } catch (error) {
    console.error('Error loading dashboard data:', error);
    showToast('‚ùå Failed to load data from Airtable');
  }
}

async function loadPageViewsTable() {
  try {
    const response = await fetch('/.netlify/functions/get-page-views-details');
    const data = await response.json();
    
    const table = document.getElementById('pageViewsTable');
    if (data.views && data.views.length > 0) {
      table.innerHTML = data.views.map(view => `
        <tr style="border-bottom: 1px solid rgba(255,255,255,0.05);">
          <td style="padding: 0.8rem;">${view.page || '/'}</td>
          <td style="padding: 0.8rem; font-size: 0.9em;">${new Date(view.timestamp).toLocaleString()}</td>
          <td style="padding: 0.8rem;">
            <div style="font-size: 0.9em;">
              <div>üåç ${view.city}, ${view.country}</div>
              <div style="opacity: 0.6; font-size: 0.85em;">${view.ip}</div>
            </div>
          </td>
          <td style="padding: 0.8rem;">
            <div style="font-size: 0.9em;">
              <div>${view.device || 'Unknown'}</div>
              <div style="opacity: 0.7; font-size: 0.85em;">${view.browser || 'Unknown'} ‚Ä¢ ${view.os || 'Unknown'}</div>
            </div>
          </td>
          <td style="padding: 0.8rem; font-size: 0.85em; opacity: 0.8; max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" title="${view.referrer}">${view.referrer}</td>
        </tr>
      `).join('');
    } else {
      table.innerHTML = '<tr><td colspan="5" style="padding: 1rem; text-align: center; opacity: 0.7;">No page views yet</td></tr>';
    }
  } catch (error) {
    console.error('Error loading page views table:', error);
    document.getElementById('pageViewsTable').innerHTML = 
      '<tr><td colspan="5" style="padding: 1rem; text-align: center; color: #e74c3c;">Error loading data</td></tr>';
  }
}

async function loadDonationsTable() {
  try {
    const response = await fetch('/.netlify/functions/get-donations-details');
    const data = await response.json();
    
    const table = document.getElementById('donationsTable');
    if (data.donations && data.donations.length > 0) {
      table.innerHTML = data.donations.map(donation => `
        <tr style="border-bottom: 1px solid rgba(255,255,255,0.05);">
          <td style="padding: 0.8rem; font-weight: 600;">$${donation.amount.toFixed(2)}</td>
          <td style="padding: 0.8rem;">${donation.email || 'Anonymous'}</td>
          <td style="padding: 0.8rem;">${new Date(donation.timestamp).toLocaleString()}</td>
          <td style="padding: 0.8rem;">
            <span style="padding: 0.25rem 0.5rem; background: ${donation.status === 'completed' ? '#27ae60' : '#95a5a6'}; border-radius: 4px; font-size: 0.85em;">
              ${donation.status}
            </span>
          </td>
        </tr>
      `).join('');
    } else {
      table.innerHTML = '<tr><td colspan="4" style="padding: 1rem; text-align: center; opacity: 0.7;">No donations yet</td></tr>';
    }
  } catch (error) {
    console.error('Error loading donations table:', error);
    document.getElementById('donationsTable').innerHTML = 
      '<tr><td colspan="4" style="padding: 1rem; text-align: center; color: #e74c3c;">Error loading data</td></tr>';
  }
}

// Analytics Charts
let deviceChart, browserChart, pagesChart, countriesChart;

async function loadAnalyticsCharts() {
  try {
    const response = await fetch('/.netlify/functions/get-page-views-details');
    const data = await response.json();
    
    if (!data.views || data.views.length === 0) return;
    
    const views = data.views;
    
    // Device Distribution
    const deviceCounts = {};
    views.forEach(v => {
      deviceCounts[v.device] = (deviceCounts[v.device] || 0) + 1;
    });
    
    if (deviceChart) deviceChart.destroy();
    deviceChart = new Chart(document.getElementById('deviceChart'), {
      type: 'doughnut',
      data: {
        labels: Object.keys(deviceCounts),
        datasets: [{
          data: Object.values(deviceCounts),
          backgroundColor: ['#3498db', '#e74c3c', '#f39c12', '#9b59b6'],
          borderWidth: 2,
          borderColor: '#1e3c72'
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: true,
        plugins: {
          legend: { labels: { color: '#fff' } }
        }
      }
    });
    
    // Browser Usage
    const browserCounts = {};
    views.forEach(v => {
      browserCounts[v.browser] = (browserCounts[v.browser] || 0) + 1;
    });
    
    if (browserChart) browserChart.destroy();
    browserChart = new Chart(document.getElementById('browserChart'), {
      type: 'pie',
      data: {
        labels: Object.keys(browserCounts),
        datasets: [{
          data: Object.values(browserCounts),
          backgroundColor: ['#1abc9c', '#3498db', '#e67e22', '#e74c3c', '#9b59b6'],
          borderWidth: 2,
          borderColor: '#1e3c72'
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: true,
        plugins: {
          legend: { labels: { color: '#fff' } }
        }
      }
    });
    
    // Top Pages
    const pageCounts = {};
    views.forEach(v => {
      const page = v.page || '/';
      pageCounts[page] = (pageCounts[page] || 0) + 1;
    });
    const topPages = Object.entries(pageCounts)
      .sort((a, b) => b[1] - a[1])
      .slice(0, 5);
    
    if (pagesChart) pagesChart.destroy();
    pagesChart = new Chart(document.getElementById('pagesChart'), {
      type: 'bar',
      data: {
        labels: topPages.map(p => p[0]),
        datasets: [{
          label: 'Views',
          data: topPages.map(p => p[1]),
          backgroundColor: '#3498db',
          borderColor: '#2980b9',
          borderWidth: 1
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: true,
        scales: {
          y: { 
            beginAtZero: true,
            ticks: { color: '#fff' },
            grid: { color: 'rgba(255,255,255,0.1)' }
          },
          x: { 
            ticks: { color: '#fff' },
            grid: { color: 'rgba(255,255,255,0.1)' }
          }
        },
        plugins: {
          legend: { labels: { color: '#fff' } }
        }
      }
    });
    
    // Top Countries
    const countryCounts = {};
    views.forEach(v => {
      if (v.country && v.country !== 'Unknown') {
        countryCounts[v.country] = (countryCounts[v.country] || 0) + 1;
      }
    });
    const topCountries = Object.entries(countryCounts)
      .sort((a, b) => b[1] - a[1])
      .slice(0, 5);
    
    if (countriesChart) countriesChart.destroy();
    countriesChart = new Chart(document.getElementById('countriesChart'), {
      type: 'bar',
      data: {
        labels: topCountries.map(c => c[0]),
        datasets: [{
          label: 'Visitors',
          data: topCountries.map(c => c[1]),
          backgroundColor: '#1abc9c',
          borderColor: '#16a085',
          borderWidth: 1
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: true,
        indexAxis: 'y',
        scales: {
          x: { 
            beginAtZero: true,
            ticks: { color: '#fff' },
            grid: { color: 'rgba(255,255,255,0.1)' }
          },
          y: { 
            ticks: { color: '#fff' },
            grid: { color: 'rgba(255,255,255,0.1)' }
          }
        },
        plugins: {
          legend: { labels: { color: '#fff' } }
        }
      }
    });
    
  } catch (error) {
    console.error('Error loading analytics charts:', error);
  }
}

// Export to CSV functions
async function exportPageViews() {
  try {
    const response = await fetch('/.netlify/functions/get-page-views-details');
    const data = await response.json();
    
    if (!data.views || data.views.length === 0) {
      showToast('‚ö†Ô∏è No page views to export', '#e74c3c');
      return;
    }
    
    const csv = 'Page,Timestamp,IP Address,City,Country,Device,Browser,OS,Referrer\n' +
      data.views.map(v => 
        `"${v.page || '/'}", "${new Date(v.timestamp).toLocaleString()}","${v.ip}","${v.city}","${v.country}","${v.device}","${v.browser}","${v.os}","${v.referrer}"`
      ).join('\n');
    
    downloadCSV(csv, `page-views-${new Date().toISOString().split('T')[0]}.csv`);
    showToast('‚úÖ Page views exported');
  } catch (error) {
    console.error('Export error:', error);
    showToast('‚ùå Failed to export page views', '#e74c3c');
  }
}

async function exportDonations() {
  try {
    const response = await fetch('/.netlify/functions/get-donations-details');
    const data = await response.json();
    
    if (!data.donations || data.donations.length === 0) {
      showToast('‚ö†Ô∏è No donations to export', '#e74c3c');
      return;
    }
    
    const csv = 'Amount,Email,Timestamp,Status\n' +
      data.donations.map(d => 
        `"$${d.amount.toFixed(2)}","${d.email || 'Anonymous'}","${new Date(d.timestamp).toLocaleString()}","${d.status}"`
      ).join('\n');
    
    downloadCSV(csv, `donations-${new Date().toISOString().split('T')[0]}.csv`);
    showToast('‚úÖ Donations exported');
  } catch (error) {
    console.error('Export error:', error);
    showToast('‚ùå Failed to export donations', '#e74c3c');
  }
}

function downloadCSV(csv, filename) {
  const blob = new Blob([csv], { type: 'text/csv' });
  const url = window.URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = filename;
  a.click();
  window.URL.revokeObjectURL(url);
}

async function deleteSubscriber(recordId, email) {
  if (!confirm(`Are you sure you want to delete ${email}?`)) return;
  
  try {
    const response = await fetch('/.netlify/functions/delete-subscriber', {
      method: 'DELETE',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ 
        recordId: recordId,
        tableName: 'Subscribers'
      })
    });
    
    const data = await response.json();
    
    if (data.success) {
      showToast('‚úÖ Subscriber deleted');
      loadDashboardData();
    } else {
      throw new Error(data.error);
    }
  } catch (error) {
    console.error('Delete error:', error);
    showToast('‚ùå Failed to delete subscriber', '#e74c3c');
  }
}

async function deleteUnsubscribed(recordId, email) {
  if (!confirm(`Remove ${email} from unsubscribed list?`)) return;
  
  try {
    const response = await fetch('/.netlify/functions/delete-subscriber', {
      method: 'DELETE',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ 
        recordId: recordId,
        tableName: 'Unsubscribed'
      })
    });
    
    const data = await response.json();
    
    if (data.success) {
      showToast('‚úÖ Removed from list');
      loadDashboardData();
    } else {
      throw new Error(data.error);
    }
  } catch (error) {
    console.error('Delete error:', error);
    showToast('‚ùå Failed to remove from list', '#e74c3c');
  }
}

async function exportSubscribers() {
  try {
    const response = await fetch('/.netlify/functions/get-subscribers');
    const data = await response.json();
    const subscribers = data.subscribers || [];
    
    if (subscribers.length === 0) {
      showToast('‚ö†Ô∏è No subscribers to export', '#e74c3c');
      return;
    }
    
    const csvContent = 'Email,Date\n' + subscribers.map(s => `${s.email},${s.date || 'N/A'}`).join('\n');
    const blob = new Blob([csvContent], { type: 'text/csv' });
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `subscribers_${new Date().toISOString().split('T')[0]}.csv`;
    a.click();
    
    showToast('‚úÖ Subscribers exported');
  } catch (error) {
    console.error('Export error:', error);
    showToast('‚ùå Failed to export subscribers', '#e74c3c');
  }
}

function clearAllData() {
  showToast('‚ö†Ô∏è Clear all data must be done in Airtable', '#e74c3c');
}

// ========== TECH STACK EDITOR ==========
let currentSkills = [];

async function openTechStackEditor() {
  const defaultSkills = [
    { icon: 'üî∑', name: 'TypeScript' },
    { icon: '‚öõÔ∏è', name: 'React' },
    { icon: 'üü¢', name: 'Node.js' },
    { icon: 'üêç', name: 'Python' },
    { icon: 'üé®', name: 'CSS/SCSS' },
    { icon: 'üî•', name: 'Firebase' },
    { icon: 'üê≥', name: 'Docker' },
    { icon: '‚òÅÔ∏è', name: 'AWS' },
    { icon: 'üì¶', name: 'MongoDB' },
    { icon: '‚ö°', name: 'Next.js' }
  ];
  
  try {
    const response = await fetch('/.netlify/functions/db-get-tech-stack');
    if (response.ok) {
      const techStack = await response.json();
      currentSkills = techStack.length > 0 ? techStack : defaultSkills;
    } else {
      currentSkills = defaultSkills;
    }
  } catch (error) {
    console.error('Error loading tech stack:', error);
    currentSkills = defaultSkills;
  }
  
  renderSkillsList();
  document.getElementById('techStackModal').style.display = 'flex';
}

function closeTechStackEditor() {
  document.getElementById('techStackModal').style.display = 'none';
  document.getElementById('newSkillIcon').value = '';
  document.getElementById('newSkillName').value = '';
}

function renderSkillsList() {
  const listElement = document.getElementById('skillsList');
  
  if (currentSkills.length === 0) {
    listElement.innerHTML = '<p style="text-align: center; opacity: 0.7;">No skills added yet</p>';
  } else {
    listElement.innerHTML = currentSkills.map((skill, index) => `
      <div style="display: flex; align-items: center; gap: 0.5rem; padding: 0.8rem; background: rgba(255,255,255,0.05); border-radius: 10px; margin-bottom: 0.5rem;">
        <span style="font-size: 1.5rem;">${skill.icon}</span>
        <span style="flex: 1;">${skill.name}</span>
        <button onclick="removeSkill(${index})" style="padding: 0.4rem 0.8rem; border: 1px solid rgba(231, 76, 60, 0.5); border-radius: 8px; background: rgba(231, 76, 60, 0.2); color: #fff; cursor: pointer; font-size: 0.9rem;">üóëÔ∏è</button>
      </div>
    `).join('');
  }
}

function addSkill() {
  const icon = document.getElementById('newSkillIcon').value.trim();
  const name = document.getElementById('newSkillName').value.trim();
  
  if (!icon || !name) {
    showToast('‚ö†Ô∏è Please fill both icon and name', '#e74c3c');
    return;
  }
  
  currentSkills.push({ icon, name });
  renderSkillsList();
  
  document.getElementById('newSkillIcon').value = '';
  document.getElementById('newSkillName').value = '';
  document.getElementById('newSkillName').focus();
}

function removeSkill(index) {
  currentSkills.splice(index, 1);
  renderSkillsList();
}

async function saveTechStack() {
  try {
    const response = await fetch('/.netlify/functions/db-save-tech-stack', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ skills: currentSkills })
    });
    
    if (response.ok) {
      showToast('‚úÖ Tech stack updated!', '#1abc9c');
      closeTechStackEditor();
    } else {
      throw new Error('Failed to save');
    }
  } catch (error) {
    console.error('Error saving tech stack:', error);
    showToast('‚ùå Failed to save tech stack', '#e74c3c');
  }
}

async function openNewsletterComposer() {
  try {
    const response = await fetch('/.netlify/functions/get-subscribers');
    const data = await response.json();
    const subscribers = data.subscribers || [];
    
    if (subscribers.length === 0) {
      showToast('‚ö†Ô∏è No subscribers to send to', '#e74c3c');
      return;
    }
    
    document.getElementById('recipientCount').textContent = subscribers.length;
    document.getElementById('newsletterModal').style.display = 'flex';
  } catch (error) {
    console.error('Error fetching subscribers:', error);
    showToast('‚ùå Failed to load subscribers', '#e74c3c');
  }
}

function closeNewsletterComposer() {
  document.getElementById('newsletterModal').style.display = 'none';
  document.getElementById('newsletterSubject').value = '';
  document.getElementById('newsletterMessage').value = '';
}

async function sendNewsletter() {
  const subject = document.getElementById('newsletterSubject').value.trim();
  const message = document.getElementById('newsletterMessage').value.trim();
  
  if (!subject || !message) {
    showToast('‚ö†Ô∏è Please fill in both subject and message', '#e74c3c');
    return;
  }
  
  const btn = document.getElementById('sendNewsletterBtn');
  btn.disabled = true;
  btn.textContent = 'üì§ Loading subscribers...';
  
  try {
    // Fetch subscribers from Airtable
    const subscribersResponse = await fetch('/.netlify/functions/get-subscribers');
    const subscribersData = await subscribersResponse.json();
    const subscribers = subscribersData.subscribers || [];
    
    if (subscribers.length === 0) {
      showToast('‚ö†Ô∏è No subscribers to send to', '#e74c3c');
      btn.disabled = false;
      btn.textContent = 'üì® Send to All';
      return;
    }
    
    if (!confirm(`Send newsletter to ${subscribers.length} subscriber(s)?`)) {
      btn.disabled = false;
      btn.textContent = 'üì® Send to All';
      return;
    }
    
    btn.textContent = 'üì§ Sending...';
    
    const token = localStorage.getItem('adminToken');
    const response = await fetch('/.netlify/functions/send-newsletter', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${token}`
      },
      body: JSON.stringify({
        subject: subject,
        message: message,
        subscribers: subscribers.map(s => s.email)
      })
    });
    
    const data = await response.json();
    
    if (data.success) {
      showToast(`‚úÖ ${data.message}`, '#1abc9c');
      closeNewsletterComposer();
    } else {
      throw new Error(data.error || 'Failed to send newsletter');
    }
  } catch (error) {
    console.error('Error:', error);
    showToast(`‚ùå ${error.message}`, '#e74c3c');
  } finally {
    btn.disabled = false;
    btn.textContent = 'üì® Send to All';
  }
}

function togglePageViews() {
  const details = document.getElementById('pageViewsDetails');
  
  if (details.style.display === 'none') {
    details.style.display = 'block';
    loadPageViewsDetails();
  } else {
    details.style.display = 'none';
  }
}

function toggleDonations() {
  const details = document.getElementById('donationsDetails');
  
  if (details.style.display === 'none') {
    details.style.display = 'block';
    loadDonationsDetails();
  } else {
    details.style.display = 'none';
  }
}

async function loadPageViewsDetails() {
  try {
    const response = await fetch('/.netlify/functions/get-page-views-details');
    const data = await response.json();
    const table = document.getElementById('pageViewsTable');
    
    if (data.views && data.views.length > 0) {
      table.innerHTML = data.views.map(view => `
        <tr style="border-bottom: 1px solid rgba(255,255,255,0.05);">
          <td style="padding: 0.8rem;">${view.page}</td>
          <td style="padding: 0.8rem;">${new Date(view.timestamp).toLocaleString()}</td>
          <td style="padding: 0.8rem; font-family: monospace;">${view.ip}</td>
        </tr>
      `).join('');
    } else {
      table.innerHTML = '<tr><td colspan="3" style="padding: 1rem; text-align: center; opacity: 0.7;">No page views yet</td></tr>';
    }
  } catch (error) {
    console.error('Error loading page views details:', error);
    document.getElementById('pageViewsTable').innerHTML = '<tr><td colspan="3" style="padding: 1rem; text-align: center; color: #e74c3c;">Error loading data</td></tr>';
  }
}

async function loadDonationsDetails() {
  try {
    const response = await fetch('/.netlify/functions/get-donations-details');
    const data = await response.json();
    const table = document.getElementById('donationsTable');
    
    if (data.donations && data.donations.length > 0) {
      table.innerHTML = data.donations.map(donation => `
        <tr style="border-bottom: 1px solid rgba(255,255,255,0.05);">
          <td style="padding: 0.8rem; font-weight: 600; color: #2ecc71;">$${donation.amount.toFixed(2)}</td>
          <td style="padding: 0.8rem;">${donation.email}</td>
          <td style="padding: 0.8rem;">${new Date(donation.timestamp).toLocaleString()}</td>
          <td style="padding: 0.8rem;"><span style="padding: 0.2rem 0.6rem; background: ${donation.status === 'completed' ? '#2ecc71' : '#e74c3c'}; border-radius: 4px; font-size: 0.85rem;">${donation.status}</span></td>
        </tr>
      `).join('');
    } else {
      table.innerHTML = '<tr><td colspan="4" style="padding: 1rem; text-align: center; opacity: 0.7;">No donations yet</td></tr>';
    }
  } catch (error) {
    console.error('Error loading donations details:', error);
    document.getElementById('donationsTable').innerHTML = '<tr><td colspan="4" style="padding: 1rem; text-align: center; color: #e74c3c;">Error loading data</td></tr>';
  }
}

function logout() {
  localStorage.removeItem('adminToken');
  showToast('‚úÖ Logged out successfully');
  setTimeout(() => {
    window.location.href = '/';
  }, 1000);
}

function showPage(pageName) {
  // Hide all pages
  const pages = document.querySelectorAll('.page-content');
  pages.forEach(p => p.style.display = 'none');
  
  // Show selected page
  const page = document.getElementById(`page-${pageName}`);
  if (page) page.style.display = 'block';
  
  // Update nav active state
  const navLinks = document.querySelectorAll('.nav-link');
  navLinks.forEach(link => link.classList.remove('active'));
  event.target.classList.add('active');
}

function showToast(message, color = '#1abc9c') {
  const toast = document.createElement('div');
  toast.style.cssText = `
    position: fixed;
    top: 20px;
    right: 20px;
    background: ${color};
    color: white;
    padding: 1rem 1.5rem;
    border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    z-index: 10000;
    font-weight: 600;
    animation: slideIn 0.3s ease-out;
  `;
  toast.textContent = message;
  
  document.body.appendChild(toast);
  
  setTimeout(() => {
    toast.style.animation = 'slideOut 0.3s ease-out';
    setTimeout(() => toast.remove(), 300);
  }, 3000);
}

const style = document.createElement('style');
style.textContent = `
  @keyframes slideIn {
    from { transform: translateX(400px); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
  }
  @keyframes slideOut {
    from { transform: translateX(0); opacity: 1; }
    to { transform: translateX(400px); opacity: 0; }
  }
`;
document.head.appendChild(style);
</script>

</body>
</html>
